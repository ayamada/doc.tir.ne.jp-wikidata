---
toc: yes
title: CLAN : Clojure, LibGDX, Android, Neko application construct kit
...


This is a document for version-0.1.0(not released yet). Old document (for version 0.0.6) is here. -> [clan/0.0.6]()

これはバージョン0.1.0(まだ未リリース)のドキュメントです。古いバージョン(0.0.6ベース)のドキュメントはこちらにあります→[clan/0.0.6]()

----

<div style="text-align:center"><img src="/devel/clan/logo_b.png" /></div>

**CLAN : Clojure, LibGDX, Android, Neko application construct kit**

**CLAN : Clojure, LibGDX, Android, Neko アプリケーション構築キット**


Abstract
========

- CLAN is ...
    - If you write [LibGDX](http://libgdx.badlogicgames.com/)'s [ApplicationListener](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/ApplicationListener.html) by **Clojure**, then CLAN can run this.
      And, CLAN can deploy to jar(for many desktop OS with Java), exe(for Windows with Java), apk(for Android).
        - Therefore, you shall be able to understand LibGDX and Clojure, if you want to use CLAN.
        - CLAN include [Neko](https://github.com/alexander-yakushev/neko) (for Android).
    - CLAN can use nREPL.
        - but it is very inconvenience, because it have some problems like [http://badlogicgames.com/forum/viewtopic.php?t=9400&p=42716]().
    - CLAN display splash screen at boot for loading Clojure.
        - Can replace logo image.
    - CLAN is completely CLI (unnecessary GUI).
    - CLAN work on UNIX like OS, Mac, and Windows!
    - CLAN use [lein-droid](https://github.com/clojure-android/lein-droid) (for Android).

----

**概要**

- CLANとは
    - [LibGDX](http://libgdx.badlogicgames.com/)の[ApplicationListener](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/ApplicationListener.html)を「Clojureで」書いたものを、実行させたり、jarやexeやapkにデプロイしたりする事のできる開発キットです。
        - よって、CLANを使いたい人はLibGDXとClojureを理解している必要があります。
        - [Neko](https://github.com/alexander-yakushev/neko) も含んでいます(android向け)
    - nREPLが使える
        - ただしかなり不便、 [http://badlogicgames.com/forum/viewtopic.php?t=9400&p=42716]() 等の問題点がある
    - プロセス起動時のClojureロード時に起動ロゴ等の画像を表示する機能あり
        - ロゴ画像は入替可能
    - 完全にcliベースでのビルドやデプロイが可能(gui環境不要)
    - unix風環境、mac、windows環境でも動く！
    - [lein-droid](https://github.com/clojure-android/lein-droid)を使っています(android向け)


Repository
==========

- [https://github.com/ayamada/clan]()


Tutorial movie
==============

now in preparation

----

**チュートリアル動画**

只今準備中


Child pages
===========
(sorry, these pages are written in japanese)

- [clan/introduction](): 別に読まなくてもよい前書き
- [clan/libgdx](): libgdxメモ
- [clan/license](): 沢山のソフトが結合した結果、大変な事になったライセンス解説
- [clan/assets](): アセット回りの話
- [clan/memo](): 雑多なメモ。とりあえず何でもここに書く。あとで分類する予定。


Requirement
===========

- Commonly-used CLI environment
    - sh, GNU make(gmake), GNU autotools(autoconf), wget, unzip
        - If you use Windows, these are in [MinGW/MSYS](http://www.mingw.org/).
            - But, you will be update wget's cert, maybe.
- [JDK 1.6](http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-javase6-419409.html) or [OpenJDK 1.6](http://openjdk.java.net/)
    - If you build Android's apk, you must use 1.6, NOT 1.7 (Android SDK requires 1.6)
    - If you don't build Android's apk, you can use 1.7
- [JRE 1.6 or later (recommend 1.7)](http://java.com/en/download/) or [OpenJDK Runtime Environment](http://openjdk.java.net/)
- [Leiningen](https://github.com/technomancy/leiningen/) 2.1.0
    - You may use version 2.1.0 now. Tentatively, 2.3.0 cannot work on `make repl`.
        - You can edit `LEIN_VERSION` to `2.1.0` in `lein` shell script, and do `lein self-install` for downgrading lein.
        - If you want to use `make repl` on lein-2.3.0, you need to read and edit `profiles-desktop` in `project-common.clj.in`. But it cause a lot of warnings (by clojure-complete).
- (optional) [Android SDK](http://developer.android.com/sdk/) (for Android's apk)
    - `Android SDK Tools` must be `Revision 2.2.0.0` or later, and `Android SDK Platform-tools` must be `Revision 17` or later, and `Android SDK Build-tools` must be `Revision 17` or later. Older versions couldn't work.
- (optional) [Launch4j](http://launch4j.sourceforge.net/) (for Windows' exe)

I look see that CLAN worked on Microsoft Windows Vista(x86-32bit), and Gentoo Linux(x86-32bit) on 2013/02/28.

----

**必要なもの**

- 一般的なCLI環境
    - sh, GNU make(gmake), GNU autotools(autoconf), wget, unzip
        - windows環境の場合は、[MinGW/MSYS](http://www.mingw.org/)に全て入ってます
            - ただし、おそらく[wgetのcertを更新しておく](http://d.hatena.ne.jp/bellbind/20110612/1307848645)必要があります
- [JDK 1.6](http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-javase6-419409.html) か [OpenJDK 1.6](http://openjdk.java.net/)
    - もしandroid用apkをビルドしたい場合、バージョンは1.6でないといけません(android sdkが1.6でないと動かない為)。
    - android用apkが不要な場合は1.7でokです
- [JRE 1.6 もしくはそれ以降 (1.7推奨)](http://java.com/en/download/) もしくは [OpenJDK Runtime Environment](http://openjdk.java.net/)
- [Leiningen](https://github.com/technomancy/leiningen/) 2.1.0
    - 今は 2.1.0 を使うようにしてください。とりあえず 2.3.0 では `make repl` が動きません。
    - `lein` スクリプト自体を編集し、中の `LEIN_VERSION` を `2.1.0` に変更する事でバージョンが変えられます。変更後は `lein self-install` を実行してください。
        - もし、どうしても 2.3.0 で `make repl` がしたい場合は、 `project-common.clj.in` ファイル内の `profiles-desktop` のところを読んでコメントアウトを解除してください。ただしrepl起動時に大量の警告が表示されます(clojure-completeのせい)。
- (optional) [Android SDK](http://developer.android.com/sdk/) (android用apkを生成したい場合のみ)
    - `Android SDK Tools` はバージョンが `2.2.0.0` 以上、 `Android SDK Platform-tools` はバージョンが `17` 以上、 `Android SDK Build-tools` はバージョンが `17` 以上が必要です。古いバージョンでは上手く動きません。
- (optional) [Launch4j](http://launch4j.sourceforge.net/) (windows用exeを生成したい場合のみ)

2013/02/28 に、windows vista(32bit)とgentoo(x86-32bit)上にてサンプルプロジェクトのビルドが動作する事を確認しています。

windows環境での各種のインストールについては、 [env]() が参考になるかもしれません。


Usage
=====

**使い方**

## Prepare to develop and run sample application for test

**開発準備とサンプルアプリ実行テスト**

### Spreading project directory

~~~{.bash .numberLines}
mkdir -p package/projname
cd package/projname
git clone https://github.com/ayamada/clan.git
(cd clan && git checkout 0.1.0)
sh clan/script/spread_current_dir.sh
~~~

- You decide `package` and `projname` as you likes
- You decide target of checkout from [git tag](https://github.com/ayamada/clan/tags)
- Run `clan/script/spread_current_dir.sh`, then spread many files to `package/projname/`
- There is assumed below directory strucuture.
    - **`package/projname/clan/` :** CLAN main unit, you don't need to edit in this directory.
    - **`package/projname/` :** there is in your application project files.
        - Check to [#directory-structure]() for details.
    - **`package/` :** You can set Makefile(or other script) for distributing built files(jar/exe/apk) by youself. (optional)
        - For example: zipping exe and README.txt, push apk to google play, etc...
    - **`package/.git`** or **`package/projname/.git` :** save your project to git (or other revision-control-system) local repository. (optional)
        - `clan/script/spread_current_dir.sh` makes `package/projname/.gitignore`, that exclude to `package/projname/clan/` .

----

**プロジェクトディレクトリの展開**

~~~{.bash .numberLines}
mkdir -p package/projname
cd package/projname
git clone https://github.com/ayamada/clan.git
(cd clan && git checkout 0.1.0)
sh clan/script/spread_current_dir.sh
~~~

- `package` と `projname` を好きに決めます。
- [git tag](https://github.com/ayamada/clan/tags) を見て、どのバージョンをcheckoutするか決めます。
- `clan/script/spread_current_dir.sh` を実行します。すると `package/projname/` の中に大量のファイルが展開されます。
- これらは以下のようなディレクトリ構成を想定しています。
    - **`package/projname/clan/` :** CLAN本体、あなたがこの中をいじる必要は通常はありません
    - **`package/projname/` :** あなたのアプリのプロジェクトのファイルはこの中に置きます。
        - [#directory-structure]() に詳細があります。
    - **`package/` :** ここに、リリース向けとして生成した jar, exe, apk を配布向けにパッケージングする為の Makefile(もしくは他のスクリプト等)を自由に置く事ができます(optional)
        - 例: exeファイルとREADME.txtをセットでzipに固める。apkファイルをgoogle playにpushする。等々…
    - **`package/.git`** もしくは **`package/projname/.git` :** あなたのプロジェクトをgit(もしくは他のリビジョン管理システム)に保存する為の何かも設置できます(optional)
        - `clan/script/spread_current_dir.sh` スクリプトは `package/projname/.gitignore` も生成します。これには `package/projname/clan/` を除外する設定が入っています。


### Build and run sample application on desktop

~~~{.bash .numberLines}
autoconf && ./configure
make run
~~~

This sample application is named "drop" or "space drop".

(This game rule is based on [http://code.google.com/p/libgdx/wiki/SimpleApp](), I rewrite by Clojure and add more gimmics. )

CLAN's `BootLoader.java` control as long as display boot-logo.

- This is for loading clojure on background.
- You can change boot-logo image file and boot-jingle sound file at later.

If "drop" works done, then finish application process, and go next.

(I explain to description of `autoconf && ./configure`, and targets of `make`, but it is at later.)

This is run application with nREPL.

~~~{.bash .numberLines}
make repl
~~~

But, it take very long time at boot, and that rerun with a defect by LWJGL in nREPL(strange window size, etc).
I guess, will almost use `make run` in cycle of develop.
And, will use `make repl` for chase to very difficult bugs.

- See [http://badlogicgames.com/forum/viewtopic.php?t=9400&p=42716]().

The sample application's source code is in `src/drop/main.clj`.

Read this, and input to nREPL console as you likes.

(For example, change and input to `(def speed-level 100)`, `(def item-spawn-interval 100000000000)`, etc...)

If you see to work nREPL, then finish application process, and go next.

----

**サンプルアプリをデスクトップ上で実行してみる**

~~~{.bash .numberLines}
autoconf && ./configure
make run
~~~

このサンプルアプリは「drop」「space drop」という名前です。

(このゲームは [http://code.google.com/p/libgdx/wiki/SimpleApp]() をベースにClojureで書き直し、色々な要素を追加しています)

アプリが起動すると、起動ロゴが表示されている間はCLANの `BootLoader.java` が制御を握ります。

- ロゴの出ている間、バックグラウンドではclojureのローゴが行われています
- 起動ロゴや起動音の差し替えができます。

サンプルアプリがちゃんと動いているようなら、アプリを終了して次に進んで下さい。

( `autoconf && ./configure` の詳細や make のターゲットについてはまた後で解説します。)

nREPL経由でサンプルアプリを実行する事もできます。

~~~{.bash .numberLines}
make repl
~~~

しかし、nREPL経由だと起動までに非常に時間がかかり、しかもnREPL中で二回目以降のアプリ起動にはLWJGLに支障があります(ウィンドウサイズがおかしくなる等)。
なので、通常の開発時は主に`make run`を使って開発を行い、`make repl`を使うのは難しいバグを追跡している時だけにするのが良いと思います。

- [http://badlogicgames.com/forum/viewtopic.php?t=9400&p=42716]() に、この件が少し書かれています。

サンプルアプリのソースは `src/drop/main.clj` にあります。

これを見ながら、nREPLのコンソールを色々と試してみてください。

(例えば、ソースから「`(def speed-level 100)`」「`(def item-spawn-interval 100000000000)`」のようなところを拾ってきて、数値を変更してnREPLに入力してみるとか)

nREPLが一応動いているのを見たら、アプリを終了して次に進んでください。

### Build and run sample application on android

(optional)

If you install Android SDK, you can run sample application on android.

You shall connect Android-debug-usb, or run Android emulator.

~~~{.bash .numberLines}
make android-run
~~~

To build for Android need very large memory(over 1G) and minutes(over 5min?).

----

**サンプルアプリをandroidで実行してみる**

(オプショナル)

android sdkをインストールしているなら、サンプルアプリをandroid上で動かす事ができます。

以下を実行する前に、androidデバッグusb接続をしておくか、エミュレータを起動しておいてください。

~~~{.bash .numberLines}
make android-run
~~~

android向けのビルドは(デスクトップ向けと比べて)非常に多くのメモリ(1G以上)と時間(5分ぐらい？)が必要になります。

### Clean up sample application

~~~{.bash .numberLines}
make distclean
~~~

Delete almost temporary files and clean up to sample application.

----

**サンプルアプリのクリア**

~~~{.bash .numberLines}
make distclean
~~~

ほとんどの一時ファイルを消し、サンプルアプリをクリアします。


## Develop your application

1. Edit `configure.ac` file
    - Do you know `autoconf`? It is not difficult.
        - `dnl` is comment
        - `AC_INIT()` is to define artifactId and version
        - `FOO="string"` is to define local variables
        - `AC_SUBST()` is to define project variables
        - If you execute `autoconf && ./configure` command, then that generate from `*.clj.in` to `*.clj`.
            - At which time, a string as `@FOO@` in `*.clj.in` was replaced to project variables by defined `AC_SUBST()`.
    - You modify in section of `dnl Defines` in file `configure.ac` for your application.

2. Edit `layout/Desktop.java.in`, `layout/MainActivity.java.in` and `android/AndroidManifest.xml.in`
    - If you don't want to deploy Android's apk, then you can ignore `layout/MainActivity.java.in` and `android/AndroidManifest.xml.in`.
    - A file `layout/Desktop.java.in` is boot entry class for desktop build. It is relocate to `desktop/src-java/(PROJECT_GROUPID)/Desktop.java`.
        - If you want to customize LWJGL process or configuration of CLAN, then you can edit this.
    - A file `layout/MainActivity.java.in` is boot entry class for android build. It is relocate to `android/src-java/(PROJECT_GROUPID)/MainActivity.java`.
        - If you want to customize Android process or configuration of CLAN, then you can edit this.

3. Discard source of sample application `src/drop/`, and create source of your application `src/...`
    - For example, if you deside `PROJECT_CAL_GENERATOR_CLASS` in `configure.ac` to "my.app.main", then you shall create `src/my/app/main.clj`. This file is main sources of your application. You can put also other source files too, of course.
    - For example, if you deside `PROJECT_CAL_GENERATOR_FN` in `configure.ac` to "generate-al", then you shall write to function like `(defn generate-al [] (proxy [ApplicationListener] [] ...)` in `src/my/app/main.clj`.
        - It is smallest application code only flashing screen.

            ~~~
            (ns my.app.main
              (:import
                (com.badlogic.gdx Gdx ApplicationListener)
                (com.badlogic.gdx.graphics GL10)))
            (defn generate-al []
              (proxy [ApplicationListener] []
                (create [] nil)
                (resume [] nil)
                (resize [w h] nil)
                (render []
                  (.. Gdx gl (glClearColor (rand) (rand) (rand) 1.0))
                  (.. Gdx gl (glClear GL10/GL_COLOR_BUFFER_BIT)))
                (pause [] nil)
                (dispose [] nil)
                ))
            ~~~

4. Edit `project-common.clj.in`
    - If you want to import/use external libraries to your project from clojars.org and other repos, then add external libraries to `dependencies-common` in `project-common.clj.in`.
        - If you want to add only desktop/android, add to `dependencies-desktop` `dependencies-android` in `project-common.clj.in`.

5. Execute `autoconf && ./configure`
    - It generate from `path/to/foo.suffix.in` to `path/to/foo.suffix`.
    - If you change `*.in` files later, then you must execute `autoconf && ./configure` again, you don't forget it.
        - Added to which, if you change `layout/*.in` files, then you must execute `make layout-clean layout`. Because, these files must relocate to `desktop/src-java/...` or `android/src-java/...`.

6. Remove resources of sample application, and put resources of your application
    - `desktop/assets/`
        - Put in here to your application's resources(image files, sound files, and other).
            - How to get out to resouces from here: `(.. Gdx files (internal "assets/filename.suffix"))`
        - This is in `desktop/`, but this is also used for Android too.
    - `desktop/assets/cbl_logo.png` and `desktop/assets/cbl_jingle.ogg`
        - These are used by BootLoader.java as default (see `layout/*.in`).
        - If these files not exists, then not display logo-image, or not play jingle-sound.
    - `desktop/assets/process_icon/`
        - This is include process-icon files for LWJGL (see `layout/Desktop.java.in`).
            - If not exists, be used to LWJGL default process-icon.
    - `textures/`
        - If you put image files into `textures/`, then these is packed by [TexturePacker](http://code.google.com/p/libgdx/wiki/TexturePacker) to `desktop/assets/pack.{atlas,png}` automatically.
            - You can do `make ta` to pack any time.
        - If you don't use TextureAtlas, then you will clear out this.
    - `android/res/`
        - Icons for Android.
    - `l4j/windows.ico`
        - Icon for Windows.
        - You can make icon for windows by GIMP.

7. Execute `make run`
    - Build and run your application.
    - If it don't work, unexpected work, raised error, then you may fix your code, and retry `make run`.
        - Or it is bug of CLAN. [Check and post issues](https://github.com/ayamada/clan/issues).
        - If you update to `src/...` then you can retry `make run` directly, but if you update to outside of `src/...` then you may execute `make clean` and `make run` for safety.
    - I describe targets of `make` later.

8. Execute `make android-run` (optional)
    - You shall install Android SDK, and you shall connect Android-debug-usb or run Android emulator before `make android-run`.
    - This require time and memory.

----

**自分のアプリを開発する**

1. `configure.ac` ファイルを編集する
    - `autoconf` は分かりますか？難しくはないです。
        - `dnl` は一行コメント
        - `AC_INIT()` で、 artifactIdとバージョンを定義
        - `FOO="string"` で、ローカル(configure.ac内)変数を定義
        - `AC_SUBST()` で、プロジェクト変数を定義
        - `autoconf && ./configure` を実行する事で、 `*.clj.in` のようなファイルから `*.clj` が生成される。
            - この時、 `*.clj.in` 内にある `@FOO@` のような文字列は、 `AC_SUBST()` で定義した変数の内容に置換される。
    - `configure.ac` 内の `dnl Defines` の各変数の内容を、あなたのアプリ用に変更しておいてください。

2. `layout/Desktop.java.in` `layout/MainActivity.java.in` `android/AndroidManifest.xml.in` を編集する
    - android用apkを生成しないのであれば、 `layout/MainActivity.java.in` `android/AndroidManifest.xml.in` は無視してよいです。
    - `layout/Desktop.java.in` にはdesktop向けビルド時の起動クラスが入っています。このファイルから生成される `Desktop.java` は、 `desktop/src-java/(PROJECT_GROUPID)/Desktop.java` に再配置されます。
        - このファイルを編集する事で、desktop向けのLWJGLプロセスの設定をいじる事ができます。
    - `layout/MainActivity.java.in` にはandroid向けビルド時の起動クラスが入っています。このファイルから生成される `MainActivity.java` は、 `android/src-java/(PROJECT_GROUPID)/MainActivity.java` に再配置されます。
        - このファイルも同様に、androidプロセス等の設定をいじれます。

3. `src/drop/` に入っているサンプルアプリのソースを捨て、 `src/...` として、あなたのアプリのソースを入れます。
    - 先ほどの `configure.ac` にて、 `PROJECT_CAL_GENERATOR_CLASS` に "my.app.main" を指定した場合、あなたは `src/my/app/main.clj` を書く事になります。勿論、このファイルから参照する他の `*.clj` を一緒に含めても問題ありません。
    - また同様に、先ほどの `configure.ac` にて、 `PROJECT_CAL_GENERATOR_FN` に "generate-al" を指定した場合、あなたは `src/my/app/main.clj` の中に「`(defn generate-al [] (proxy [ApplicationListener] [] ...)`」のような関数を書く必要があります。
        - 以下は画面をフラッシュさせるだけの最小限のアプリのソースです。

            ~~~
            (ns my.app.main
              (:import
                (com.badlogic.gdx Gdx ApplicationListener)
                (com.badlogic.gdx.graphics GL10)))
            (defn generate-al []
              (proxy [ApplicationListener] []
                (create [] nil)
                (resume [] nil)
                (resize [w h] nil)
                (render []
                  (.. Gdx gl (glClearColor (rand) (rand) (rand) 1.0))
                  (.. Gdx gl (glClear GL10/GL_COLOR_BUFFER_BIT)))
                (pause [] nil)
                (dispose [] nil)
                ))
            ~~~

4. `project-common.clj.in` を編集する
    - clojars.org等から外部ライブラリをimportしたい場合、このファイルの中の `dependencies-common` に追加します。
        - ただし、desktop向け/android向け限定にしたい場合は、 `dependencies-dependencies` もしくは `dependencies-android` に追加します。

5. `autoconf && ./configure` を実行する
    - 先ほどの説明通り、これで `path/to/foo.suffix.in` から `path/to/foo.suffix` が生成されます。
    - この後でもし `*.in` ファイルの内容を変更した時は、必ず忘れずに `autoconf && ./configure` を再実行してください。そうしないと変更内容が反映されません。
        - なお、もし変更したファイルが `layout/*.in` だった場合、上記に加えて `make layout-clean layout` も実行する必要があります。これは、 `layout/` 配下のファイルは `desktop/src-java/...` 等に再配置される必要があるからです。

6. 以下の各ディレクトリに入っているサンプルアプリのリソースを削除し、代わりにあなたのアプリのリソースを入れます
    - `desktop/assets/`
        - ここにはアプリ自体が利用する各種のリソースファイル(画像、サウンド、その他各種何でも)を入れます。
            - 入れたリソースファイルを取り出すには「`(.. Gdx files (internal "assets/filename.suffix"))`」のように指定します。
        - このディレクトリは `desktop/` の中にありますが、desktop向けに限らず、android向けの場合でもこのディレクトリが参照されます。
    - `desktop/assets/cbl_logo.png` と `desktop/assets/cbl_jingle.ogg`
        - この二つのファイルは BootLoader.java が起動ロゴ/起動SEとして使用します。このファイル名は変更可能です(`layout/*.in` を見てください)。
        - これらのファイルが存在しない場合は、単に起動ロゴは表示されず、起動SEも再生されないだけです。
    - `desktop/assets/process_icon/`
        - ここにはLWJGL(desktopプロセス)用のアイコンを入れます(これも `layout/Desktop.java.in` でファイル名を変更できます)。
            - このアイコンがない場合、LWJGLロゴのデフォルトアイコンが使われます。
    - `textures/`
        - ここに画像ファイルを入れると、ビルド時に自動的に [TexturePacker](http://code.google.com/p/libgdx/wiki/TexturePacker) が実行され、 `desktop/assets/pack.{atlas,png}` として生成されます。
            - `make ta` を実行する事で、いつでも再生成が可能です。
        - 上記のTextureAtlasを使わない場合は、このディレクトリは空にしておけばokです。
    - `android/res/`
        - android用アプリアイコンを入れます。
    - `l4j/windows.ico`
        - windows用アイコンを入れます。
        - windows用アイコンは[GIMPで作れます](clan/assets#アイコン)。

7. `make run` を実行する
    - あなたのアプリをビルドし、その後に起動します。
    - もしうまく動かなかったり、予想と違う動きをしたり、エラー例外を投げたりした場合、ソースを修正してからまた `make run` を実行してみてください。
        - もしくはCLANのバグかもしれません。[githubのissues](https://github.com/ayamada/clan/issues)をチェックしたり投稿したりしてみてください。
        - `src/...` の中を修正した時は `make run` を再実行するだけでokですが、 `src/...` の中以外を修正した時は、念の為に `make clean` してから `make run` した方がよいです。
    - `make` の他のターゲット指定についてはまた後で説明します。

8. `make android-run` を実行する(optional)
    - 実行前にandroid sdkをインストールし、androidデバッグusb接続もしくはandroidエミュレータ起動をしておいてください。
    - これには結構な時間と大量のメモリが必要です。


## Release your application

**自分のアプリをリリースする**

### Prepare for release

1. Edit `configure.ac`
    - Change version string for release
    - Increment `PROJECT_ANDROID_VERSIONCODE` (for Android's apk)

2. Edit `android/AndroidManifest.xml.in`
    - Change enable/disable `INTERNET` and other `uses-permission` if needed

3. Make release-tag or release-branch (if needed)

4. Do `autoconf && ./configure`

----

**リリース準備**

1. `configure.ac` をいじる
    - バージョン文字列をリリース用に変更
    - `PROJECT_ANDROID_VERSIONCODE` を増やす(android用)

2. `android/AndroidManifest.xml.in` をいじる
    - 必要に応じて `INTERNET` やその他の `uses-permission` 項目の有効/無効を変更する

3. 必要に応じて、リリースタグやリリースブランチを作成

4. ファイルをいじったので、 `autoconf && ./configure` を実行

### Build jar of release-version for desktop

~~~
make release-jar
~~~

And, built `target/{artifactId}.jar`.

NOTE: It include `make desktop-clean` for safety.

----

**リリース版のデスクトップos向けjarをビルドする**

~~~
make release-jar
~~~

これで `target/{artifactId}.jar` が生成される。

注意：この際に、安全の為に `make desktop-clean` が実行されます。

### Build exe of release-version for windows

It is required to [Launch4j](http://launch4j.sourceforge.net/).

~~~
make release-exe
~~~

And, built `target/{artifactId}.exe` from `target/{artifactId}.jar`.

----

**リリース版のwindows向けexeをビルドする**

[Launch4j](http://launch4j.sourceforge.net/) が必要です。

~~~
make release-exe
~~~

これで `target/{artifactId}.jar` から `target/{artifactId}.exe` が生成される。

### Build apk of release-version for android

It is required this list.

- Install [Android SDK](http://developer.android.com/sdk/)
- You will generate your [private key](http://developer.android.com/tools/publishing/app-signing.html#cert)

You should edit `~/.lein/profiles.clj`, add `:clan-sign` entry.

~~~
{
 :clan-sign {:android {:keystore-path "d:/home/.android/foo.keystore"
                       :key-alias "foo"
                       :sigalg "SHA1withRSA"
                       :keypass "password" ; optional
                       :storepass "password" ; optional
                       }}
 }
~~~

- `:keystore-path`, `:key-alias` : Private key.
- `:sigalg` : Algorithm of sign. If you key is `RSA` then "SHA1withRSA", or else if you key is `DSA` then "SHA1withDSA".
- `:keypass`, `:storepass` : Passwords. If you not set these, you will enter password on build-time.

~~~
make release-apk
~~~

It takes long time.

And, built `target/{artifactId}.apk`.

NOTE: It include `make android-clean` for safety.

----

**リリース版のandroid向けapkをビルドする**

以下が必要です。

- [Android SDK](http://developer.android.com/sdk/) のインストール
- [private key](http://developer.android.com/tools/publishing/app-signing.html#cert) の生成

`~/.lein/profiles.clj` に `:clan-sign` エントリを追加しておく必要があります。

~~~
{
 :clan-sign {:android {:keystore-path "d:/home/.android/foo.keystore"
                       :key-alias "foo"
                       :sigalg "SHA1withRSA"
                       :keypass "password" ; optional
                       :storepass "password" ; optional
                       }}
 }
~~~

- `:keystore-path`, `:key-alias` : リリース用の鍵ファイルおよび鍵のエイリアス名を設定します。
- `:sigalg` : 署名アルゴリズム指定です。上記の鍵を `RSA` で生成した場合は "SHA1withRSA" を、 `DSA` で生成した場合は "SHA1withDSA" を指定してください。
- `:keypass`, `:storepass` : 鍵のパスワードです。設定しない場合はリリースビルド時にパスワードを聞かれるので入力する必要があります。

~~~
make release-apk
~~~

時間がかかります。

これで `target/{artifactId}.apk` が生成されます。

注意：この際に、安全の為に `make android-clean` が実行されます。

### Build all

~~~
make release
~~~

And, built `target/{artifactId}.jar`, `target/{artifactId}.exe` and `target/{artifactId}.apk`.

----

**リリース版のjar, exe, apkを一度にビルドする**

~~~
make release
~~~

これで `target/{artifactId}.jar` `target/{artifactId}.exe` `target/{artifactId}.apk` が生成されます。

### Other work for release

- Do final check to built files.
- Packaging for distribution (if needed)
- Register Google Play and other distribution site (if needed)
- Change files for devel (if needed)
    1. Edit `configure.ac` for version string
    2. Edit `android/AndroidManifest.xml.in`
    3. Do `autoconf && ./configure`

----

**その他のリリース作業**

- 生成されたファイルを動かしてみて、最終チェックを行います。
- 必要に応じて、配布用にパッケージングします(README.txtを同梱したり等)。
- 必要に応じて、google playに登録したり、配布サイトに設置したりします。
- 必要に応じて、リリース向けに変更していた部分を開発向けに戻します。
    1. `configure.ac` のバージョン文字列など
    2. `android/AndroidManifest.xml.in` の `uses-permission` など
    3. 変更したら、 `autoconf && ./configure` を実行


Directory structure
===================

I suppose to setup by [#spreading-project-directory]() (there is in `package/projname/`).

- **`package/projname/clan/`** : CLAN main unit, you don't need to edit in this directory.
    - **`package/projname/clan/cbl/`** : BootLoader.java, claninfo.clj and clanutil.clj are in here.

- **`package/projname/.gitignore`** : it exclude to `package/projname/clan/` from your project's `.git/`.

- **`package/projname/src/`** : your source is in here.
- **`package/projname/src-java/`** : your java source is in here(optional).

- **`package/projname/desktop/`** : There is to build for desktop, and debug-run environment.
    - **`package/projname/desktop/assets/`** : There is enclose any resource files for your app. Not only for desktop but also for Android.
        - **`package/projname/desktop/assets/cbl_logo.png`** : boot-logo
        - **`package/projname/desktop/assets/cbl_jingle.ogg`** : boot-se
        - **`package/projname/desktop/assets/pack.atlas`** : generated by TexturePacker from `package/projname/textures/`
        - **`package/projname/desktop/assets/pack.png`** : ditto
        - **`package/projname/desktop/assets/process_icon/`** : There is enclose process icons for desktop
        - **`package/projname/desktop/assets/drop/`** : resources for sample app (it isn't need for your app, can be discarded)

- **`package/projname/android/`** : There is to build for Android.
    - **`package/projname/android/res/`** : There is enclose res for Android

- **`package/projname/l4j/`** : There is for launch4j.

- **`package/projname/layout/`** : There is enclose to boot entry class

- **`package/projname/textures/`** : There is enclose to source images of [TexturePacker](http://code.google.com/p/libgdx/wiki/TexturePacker) (see [#develop-your-application]()).

- **`package/projname/tmp/`** : There is temporary directory for expand libgdx.

- **`package/projname/target/`** : There is enclose to target files like `app.jar`, `app.exe`, `app.apk` (and related other temporary files) for release.

----

**ディレクトリ構造**

[#spreading-project-directory]() でのセットアップを前提としています(`package/projname/` に配置している想定です)。

- **`package/projname/clan/`** : CLAN本体、基本的にはいじる必要はありません。
    - **`package/projname/clan/cbl/`** : BootLoader.java claninfo.clj clanutil.clj が入っています

- **`package/projname/.gitignore`** : あなたのプロジェクトの `.git/` から、 `package/projname/clan/` を除外する設定が含められています

- **`package/projname/src/`** : ここにあなたのclojureコードを入れます
- **`package/projname/src-java/`** : ここにあなたのjavaコードを入れます(オプショナル)

- **`package/projname/desktop/`** : デスクトップ向けビルド用、兼、開発時実行環境
    - **`package/projname/desktop/assets/`** : あなたのアプリが参照する各種のリソースファイル置き場。android向けビルドでもここが参照される
        - **`package/projname/desktop/assets/cbl_logo.png`** : 起動ロゴ
        - **`package/projname/desktop/assets/cbl_jingle.ogg`** : 起動効果音
        - **`package/projname/desktop/assets/pack.atlas`** : 後述の `package/projname/textures/` から生成される、 TextureAtlas 用のファイル
        - **`package/projname/desktop/assets/pack.png`** : 同上
        - **`package/projname/desktop/assets/process_icon/`** : desktop向けプロセスアイコン置き場
        - **`package/projname/desktop/assets/drop/`** : サンプルアプリ用のリソース一式。捨ててよい

- **`package/projname/android/`** : android向けビルド用
    - **`package/projname/android/res/`** : androidのres置き場

- **`package/projname/l4j/`** : launch4j用

- **`package/projname/layout/`** : デスクトップ/androidの各ブート部分が入っている

- **`package/projname/textures/`** : [TexturePacker](http://code.google.com/p/libgdx/wiki/TexturePacker)でpackする元画像置き場(詳細は[#develop-your-application]()参照)

- **`package/projname/tmp/`** : libgdx配布物を展開する一時ディレクトリ

- **`package/projname/target/`** : リリース版の `app.jar` `app.exe` `app.apk` およびリリースに関連する一時ファイル置き場


Utilities
=========

CLAN supply `claninfo.clj` and `clanutil.clj`.

~~~
(use '[jp.ne.tir.clan.claninfo :as claninfo])

claninfo/is-release? ; => true or false
claninfo/clan-clojure-version ; => "1.5.0"
; ... (and more vars)
~~~

~~~
(use '[jp.ne.tir.clan.clanutil])

(keep-code-when-release
  (prn "disable wizard-mode")
  ...)
(keep-code-when-desktop
  (prn "a payment handling for desktop")
  ...)
(keep-code-when-android
  (prn "a payment handling for android")
  ...)
(purge-code-when-release
  (prn "enable wizard-mode")
  ...)
; ... (and more fns)

(set-display-bootlogo-in-android!) ; this is for explicit manipulation to shutdown process by user

(set-jingle-off-by-pref! boolean) ; play/mute boot-jingle on boot time

(is-jingle-off-by-pref?) ; => true or false

(get-package-type) ; => :apk or :exe or :jar (it return :jar when make run/repl)
(get-os-type) ; => ; => :android or :windows or :unix
~~~

See `clan/cbl/src/jp/ne/tir/clan/claninfo.clj.in` and `clan/cbl/src/jp/ne/tir/clan/clanutil.clj` for more information.


List of targets for make
========================

Refer to `Makefile.in` for more information.

**makeターゲット一覧**

詳細は `Makefile.in` を確認してください。


## Dependencies

- `make dep-libgdx`
    - Download the package of libgdx from official site, extract and register jars to local repository of lein.
    - libgdxパッケージを公式サイトからダウンロードし、解凍し、jarをleinのローカルリポジトリに登録します。

- `make dep`
    - similar `make dep-libgdx` right now.
    - 現在は `make dep-libgdx` と同じです。

- `make ta`
    - Build `desktop/assets/pack.{atlas,png}` from `textures/` by [TexturePacker](http://code.google.com/p/libgdx/wiki/TexturePacker).
    - [TexturePacker](http://code.google.com/p/libgdx/wiki/TexturePacker)を使い、 `textures/` から `desktop/assets/pack.{atlas,png}` を生成します。

- `make layout`
    - Relocate from `layout/*.java` to `desktop/src-java/.../Desktop.java` or 'android/src-java/.../MainActivity.java`.
    - `layout/*.java` を、 `desktop/src-java/.../Desktop.java` と 'android/src-java/.../MainActivity.java` へと配置します。

## For desktop or development

- `make devpack`
    - Build temporary jar for debug.
    - 開発用の一時jarを生成します。

- `make run`
    - Run your application.
    - あなたのアプリを起動します。

- `make repl`
    - Run your application with nREPL console.
    - あなたのアプリをnREPLコンソール付きで起動します。

- `make pack`
    - Build jar for release (for internal use).
    - リリース版のjarをビルドします(内部用)。

## For Android

- `make android-build`
    - Build apk for debug.
    - 開発用のapkを生成します。

- `make android-install`
    - Install apk (for debug) to device.
    - 開発用のapkを端末にインストールします。

- `make android-run`
    - Run apk (for debug) in device.
    - 開発用のapkを端末で実行します。

- `make android-repl`
    - Run apk (for debug) with nREPL console(sorry, now preparing).
    - 開発用のapkを端末にてnREPLコンソール付きで実行します(すいません、まだ準備中です)。

## For releases

- `make release-jar`
    - Build jar for release.
    - リリース版のjarをビルドします。

- `make release-exe`
    - Build exe for release from jar.
    - リリース版のexeをビルドします。

- `make release-apk`
    - Build apk for release.
    - リリース版のapkをビルドします。

- `make release`
    - Build jar, exe, and apk for release.
    - リリース版のjar, exe, apk全部をビルドします。

- `make release-apk-install`
    - Install apk (for release) to device. It requires `make release-apk`.
    - リリース版のapkを端末にインストールします。 `make release-apk` を先に実行しておいてください。

- `make release-apk-run`
    - Run apk (for release) to device. It requires `make release-apk-install`.
    - リリース版のapkを端末から起動します。 `make release-apk-install` を先に実行しておいてください。


## Cleanups

- `make dep-libgdx-clean`
    - Remove files that were generated by `make dep-libgdx` without `libgdx-x.y.z.zip`.
    - `make dep-libgdx` によって生成されたファイルを、 `libgdx-x.y.z.zip` を除いて全て削除します。

- `make depclean`
    - Ditto.
    - 同上。

- `make ta-clean`
    - Remove `desktop/assets/pack.atlas` and `desktop/assets/pack.png`.
    - `desktop/assets/pack.atlas` と `desktop/assets/pack.png` を削除します。

- `make layout-clean`
    - Remove files that were generated by `make layout`.
    - `make layout` によって生成されたファイルを削除します。

- `make desktop-clean`
    - Cleanup files that related to desktop builds. 
    - desktop向けビルドの中間ファイルを削除します。

- `make android-clean`
    - Cleanup files that related to Android builds. 
    - android向けビルドの中間ファイルを削除します。

- `make release-clean`
    - Remove `target/*`.
    - `target/*` を削除します。

- `make clean`
    - Do `make desktop-clean android-clean layout-clean ta-clean`

- `make ac-clean`
    - Remove to files that were generated by `autoconf && ./configure`.
    - `autoconf && ./configure` によって生成されたファイルを削除します。

- `make distclean`
    - Do `make clean ac-clean release-clean`

- `make maintainer-clean`
    - Do `make distclean`, and remove `libgdx-x.y.z.zip`.
    - `make distclean` を実行し、更に `libgdx-x.y.z.zip` も削除します。


How to maintain CLAN itself
===========================

This section is for me.

CLAN was developed with sample app.

----

**CLAN自身のメンテナンス手順**

この項目は筆者の為のものです。

CLANはサンプルアプリとセットで開発を行う。

## Develop CLAN

~~~{.bash .numberLines}
mkdir -p clan_parent
cd clan_parent
git clone git@github.com:ayamada/clan.git
sh clan/script/spread_current_dir.sh
~~~

- It isn't need to project directory, because sample app hasn't respository
- Do `git clone` from ssh, not https(because, https is readonly)
- expand sample files

May develop CLAN with sample app.
And edit sample app sources (`src/`) and inside `clan/`.

If you want to commit to repository, then you do to command like below.

~~~{.bash .numberLines}
make distclean
rm -rf clan/sample
cp -a Makefile.in android configure.ac project-common.clj.in \
desktop/ layout/ src/ src-java/ textures/ l4j/ clan/sample/
cd clan
git status
git diff
git add ...
git commit
cd -
~~~

Point is to get back to edit files to `clan/sample/`.

NOTE: you may check `git diff` for local changes.

Release sample app (if needed)

- See [#release-your-application]().
- Publish distribution of sample app if needed. Register Google Play.

----

**CLANの開発**

~~~{.bash .numberLines}
mkdir -p clan_parent
cd clan_parent
git clone git@github.com:ayamada/clan.git
sh clan/script/spread_current_dir.sh
~~~

- サンプルアプリは独自のリポジトリを持たないので、プロジェクトディレクトリを作る必要はない
- `git clone` はhttpsではなく、sshで行う(pushするので)
- 通常と同様にファイルを展開している

サンプルアプリとCLANを開発できるようになった。

なので、サンプルアプリのソース(`src/`)と `clan/` 内を編集する。

もしリポジトリにコミットしたくなったら、下のコマンドのように行う。

~~~{.bash .numberLines}
make distclean
rm -rf clan/sample
cp -a Makefile.in android configure.ac project-common.clj.in \
desktop/ layout/ src/ src-java/ textures/ l4j/ clan/sample/
cd clan
git status
git diff
git add ...
git commit
git push
cd -
~~~

要は、編集した各ファイルを `clan/sample/` に戻している。

注意： `git diff` をチェックして、ローカルな変更をコミットに含めてしまわないよう確認した方がよい。

もし必要なら、サンプルアプリをリリースする。

- この手順は [#release-your-application]() を参照
- 必要に応じて、サンプルアプリの配布物を公開する事。google playにも登録する事


## Release CLAN

0. Add record for release to `ChangeLog`
    - Must check `git log` and append important changes to `ChangeLog`
1. Edit `script/settings.sh` and remove `-SNAPSHOT` from version string
2. `git add ChangeLog script/settings.sh`
3. `git commit -m 'version X.Y.Z releasing'`
4. `git tag -a X.Y.Z -m 'a description'`
5. Edit `script/settings.sh` and increment version string and add `-SNAPSHOT` to version string
6. `git add script/settings.sh`
7. `git commit -m 'version X.Y.Z released'`
8. `git push`
9. `git push origin --tags`
10. Edit [http://doc.tir.ne.jp/devel/clan]()(this page!), and press "公開サイトに反映" button.
    - Modify "Latest version" on a description
    - Append important changes to this document if exists

----

**CLANのリリース**

0. ChangeLog にリリースの記録を行う
    - gitのコミットログを確認し、重要な変更点があるならきちんと記入する事
1. `script/settings.sh` のバージョン番号から、 `-SNAPSHOT` を除去
2. `git add ChangeLog script/settings.sh`
3. `git commit -m 'version X.Y.Z releasing'`
4. `git tag -a タグ名 -m 'メッセージ'`
5. `script/settings.sh` のバージョン番号を上げ、 `-SNAPSHOT` を付与
6. `git add script/settings.sh`
7. `git commit -m 'version X.Y.Z released'`
8. `git push`
9. `git push origin --tags`
10. [http://doc.tir.ne.jp/devel/clan]()(つまりこのページ)を編集し、その後「公開サイトに反映」ボタンを押す。
    - 概要のところの「現在のバージョン」を更新
    - 重要な変更内容を追記(もしあるなら)


FAQ
===

How to use external library from clojars and etc
:   Edit `project-common.clj.in` and do `autoconf && ./configure`

I want to separate process by desktop or Android
:   You can use `keep-code-when-desktop` and others by [jp.ne.tir.clan.clanutil](#utilities). These can includes to `import`, `use` and other special-forms because that do code-elimination at compile-time.

Have error `java.security.SignatureException: private key algorithm is not compatible with signature algorithm` on make apk
:   See [#build-apk-of-release-version-for-android]() and edit `~/.lein/profiles.clj`.

I got error `#<FileNotFoundException java.io.FileNotFoundException: Could not locate path/to/Desktop__init.class or path/to/Desktop.clj on classpath: >` by `make repl`
:   You should use lein-2.1.0. See [#requirement]().

My app is too slow on Android.
:   Enabling [`*warn-on-reflection*`](http://clojure.org/java_interop#Java%20Interop-Type%20Hints), and insert type specifier. reduce GC whatever possible in render(). Inlining from function to macro. search and read android-tuning-article for java.

How to upgrade CLAN
:   Do `cd clan`, `git pull` and `git checkout x.y.z` ([tag list](https://github.com/ayamada/clan/tags)). but, you must check to ChangeLog for incompatible changes at before.

I want to change/erase background console output, boot logo and other.
:   You edit `layout/*.java.in`.

I want to change boot screen more better.
:   You edit `clan/cbl/src-java/jp/ne/tir/clan/BootLoader.java`, and please send pull-req to me.

Not display boot-logo to boot at second time and more
:   Boot-logo is for to wait to loading clojure core. But almost processes were reused on Android, So not need to display boot-logo to boot at second time and more. Even so, if you want to display boot-logo, you may call [`(set-display-bootlogo-in-android!)`](#utilities).

Vars/functions were kept to defined/modified by previous execution while reboot Android machine
:   Finished Processes were reused on Android. You may use another Android apps like "task killer".

Edit files and do `make run` that works, but Edit files and do `make android-run` that not work (not reflected from modified sources)
:   Sorry, do `make android-clean android-run`.

How to use neko
:   Libgdx not provide to manipulate Android's activity. Neko have this function. If you want to manipulate Android's activity, you can use neko. See [document of neko](https://github.com/alexander-yakushev/neko/wiki).

Can't work `make repl`
:   Probably, you use `lein-2.3.0`. see [#requirement]().

What is CLAN logo?
:   This is my family emblem. Change more better logo on later. (because
    it is too cutting corners.) logo's emblem part came from eps-file
    that distributed by [http://eps.crest-japan.net/index_en.php]().

What is assets of sample game?
:   all assets were made by me.

Other questions
:   Please write to [https://github.com/ayamada/doc.tir.ne.jp-wikidata/issues]() (can write both english and japanese).

----

**FAQ**

外部ライブラリを使いたい
:   `project-common.clj.in` を編集し、 `autoconf && ./configure` を実行してください

desktopとandroidで処理を分けたい
:   [jp.ne.tir.clan.clanutil](#utilities)の`keep-code-when-desktop`系を使ってください。コンパイル時にターゲット以外のコード除去が行われるので、`import`や`use`等も囲めます。

apk生成時に `java.security.SignatureException: private key algorithm is not compatible with signature algorithm` というエラーが出る
:   鍵のアルゴリズムと署名のアルゴリズムが一致していません。 [#build-apk-of-release-version-for-android]() を見ながら `~/.lein/profiles.clj` を変更してみてください。

`make repl` 時に `#<FileNotFoundException java.io.FileNotFoundException: Could not locate path/to/Desktop__init.class or path/to/Desktop.clj on classpath: >` というエラーが出る
:   lein は 2.1.0 を使います。 [#requirement]() を見てください

android実機ですごく遅い
:   [`*warn-on-reflection*`](http://clojure.org/java_interop#Java%20Interop-Type%20Hints) を有効にし、型指定を追加しまくってみる。一定間隔でガクガクする場合はGCが原因なので、可能な限りrenderハンドラ内でオブジェクト生成しないようにする。関数呼び出しもそこそこコストが高いのでマクロを使ってインライン化してみる(つまり`reduce`とかは使いづらい)。この辺りは既存のandroid向けjavaチューニングの記事を探して参考にできる

CLANのアップデート手順
:   `cd clan` してから、 `git pull` と `git checkout x.y.z` を実行してください([タグ一覧](https://github.com/ayamada/clan/tags))。ですが、ChangeLogに非互換な変更がないかどうかを先に確認しておいてください。

起動ロゴ、コンソール出力、等々を変更したい
:   `layout/*.java.in` をいじってください。

起動画面をもっとよく変更したい
:   `clan/cbl/src-java/jp/ne/tir/clan/BootLoader.java` をいじってください。よかったらpull-reqもしてください。

二回目起動時に起動画面が表示されない
:   android実機では一度起動したプログラムはしばらくキャッシュされる為、二回目以降の起動は高速に行えます。起動画面は起動に時間がかかるのをごまかす為のものなので、高速起動できるなら起動画面を出す必要はないので、バージョン0.0.4からは出さないようにしました。それでも起動画面を出したい場合は、 [`(set-display-bootlogo-in-android!)`](#utilities) を実行してください。

二回目起動時に、前回のプロセスで定義した変数/関数等の内容が、android本体を再起動するまで残っている
:   「task killer」系のアプリを使って完全に終了させない限り、プロセスは再利用されます。詳細は[clan/libgdx#androidのdexキャッシュ問題]()を見てください。

ファイルを変更してから `make run` を実行しても反映されているが、ファイルを変更してから `make android-run` を実行しても反映されない
:   現在のところは仕様です。`make android-clean android-run` を実行してください。

nekoの使い方
:   androidではActivity内に子Activityを持つ構造が普通で、libgdxはそのActivity内にゲームを作る機能はあるけれど、Activity構造自体をどうこうする機能は提供していない。nekoはその機能があるので、そういう構造にしたい場合はnekoを使う。がayamadaがまだそういう機能を必要とするアプリを作ってないので取り込むだけ取り込んで放置されている。そういうアプリを作り始めたらドキュメントを書く。それまでは自分で[nekoのドキュメント](https://github.com/alexander-yakushev/neko/wiki)を読んで調べてほしい。

`make repl`が動かない
:   おそらくあなたは `lein-2.3.0` を使っています。 [#requirement]() を確認してみてください。

CLANのロゴは何？
:   うちの家の家紋です。あとでもっとちゃんとしたロゴを作る(あまりにも手抜きなので)。家紋部分は [http://eps.crest-japan.net/]() からepsファイルを貰ってきて加工して作った。

サンプルゲームの画像や音は何？
:   自作した。全部俺。

その他の質問
:   [https://github.com/ayamada/doc.tir.ne.jp-wikidata/issues]() にお願いします(日本語でok)。


TODO
====

- support iOS and GWT
    - I need iOS-machine and mac, but I haven't money

- isolate `desktop/` for `make run`
    - if target application make temporary files, that get `desktop/` messy.

- simplify spaghetti build process (but it is difficult)
    - remove autoconf (if possible)
    - remove Makefile (if possible)

- enable proguard.cfg ( remove `-dontshrink` and tune-up )
    - [http://stackoverflow.com/questions/12281365/obfuscating-clojure-uberjars-with-proguard]()

- automatically change `uses-permission` (and others) in `android/AndroidManifest.xml`
    - I want to enable/disable `INTERNET`, `WRITE_EXTERNAL_STORAGE` when release/debug

- collecting and documentation to know-how in clojure(for android), libgdx, android, neko

- 増やし忘れ対策 of `PROJECT_ANDROID_VERSIONCODE` in configure.in

- maintain documents
- translate from japanese comment to english in source
- report to libgdx community
- change CLAN logo to more better


Help me
=======

- If you found mistaken contents or wrong english on this document, please report to [https://github.com/ayamada/doc.tir.ne.jp-wikidata/issues]() (can write both english and japanese).
- I(ayamada, developer of CLAN) have only short time for develop to CLAN.
    - Please give me [pull-req](https://github.com/ayamada/clan/pulls).
        - Especially, Java developer for BootLoader.java (but comments are written in japanese in source now, sorry...)
- I have no money.
    - Please give me a work for money.
        - See [my resume](/tir.ne.jp/members/yamada/resume#english-version).
    - Please donate me a money for develop to CLAN.
        - <form action="https://www.paypal.com/cgi-bin/webscr" method="post"><input type="hidden" name="cmd" value="_donations" /><input type="hidden" name="business" value="T47SCVZKCCHWL" /><input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!" /><input type="hidden" name="lc" value="en_US" /></form>
- Contact for me (provisional): [`@rnkv`](https://twitter.com/rnkv)

----

- この文書の内容や英文にミス等がありましたら、 [https://github.com/ayamada/doc.tir.ne.jp-wikidata/issues]() にて指摘していただけると助かります(日本語でok)。
- 山田(CLAN開発者)はあまりCLAN自体の開発に時間を費せません。
    - よかったら [pull-req](https://github.com/ayamada/clan/pulls) おねがいします。
        - 特にJavaの得意な人。BootLoader.javaまわりは非常に改善の余地があります
- 山田は資金がありません。
    - よかったら金になるお仕事ください。
        - 詳細については[山田のresume](/tir.ne.jp/members/yamada/resume)を見てください。
    - よかったらCLAN開発資金を寄付してください。
        - …と言いたいところですが、日本ではPayPal経由での寄付ができないので、代わりに、下のページからamazonで買い物をしていただけると非常に助かります。
            - [http://vnctst.tir.jp/ja/misc/amazon.html]()
- libgdxは日本語ドキュメントが猛烈に不足しているので、あなたも自分のサイトでlibgdxの日本語記事を書いてみませんか？
    - 山田が書いた雑多な記事は、[clan/libgdx]()にあります。
- 山田はやる気がありません。
    - 「やる気」はこの世で最も貴重なものの内の一つであり、その源となるようなものがあったら是非ください(例えば、面白いurl等)
- 山田に連絡する場合はとりあえず [`@rnkv`](https://twitter.com/rnkv) あたりにください。


Link
====

- See [https://github.com/ayamada/clan#link]().


License
=======

CLAN have [Apache License 2.0](http://www.apache.org/licenses/LICENSE-2.0).

Which can be found in the file [LICENSE](https://github.com/ayamada/clan/blob/master/LICENSE).

(なお、CLANのライセンスは上記の通りですが、CLAN生成物のライセンスがどうなるかについては、 [clan/license]() にメモがあります。日本語のみ。)



<!-- vim:set ft=pandoc ts=4 sts=4 sw=4 et: -->
